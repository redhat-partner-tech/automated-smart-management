---
# tasks file for ec2_node_tools

# Gather info
- name: Get instance details
  ansible.builtin.include_tasks: get_instance_details.yml
  when: ec2_instance_action != "snapshot_delete"

# Actions
- name: Start instance
  ansible.builtin.include_tasks: instance/start_instances.yml
  when: ec2_instance_action == "start"

- name: Stop instance
  ansible.builtin.include_tasks: instance/stop_instances.yml
  when: ec2_instance_action == "stop"

- name: Create instance snapshot
  ansible.builtin.include_tasks: snapshot/create.yml
  when: ec2_instance_action == "snapshot_create"

- name: Delete instance snapshot
  ansible.builtin.include_tasks: snapshot/delete.yml
  when: ec2_instance_action == "snapshot_delete"

- name: Revert instance snapshot
  ansible.builtin.include_tasks: snapshot/revert.yml
  when: ec2_instance_action == "snapshot_revert"
